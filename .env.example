# Prismata Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Storage Configuration
# =============================================================================

# Storage backend: "local" or "s3"
PRISMATA_STORAGE_BACKEND=local

# Local storage paths (used when PRISMATA_STORAGE_BACKEND=local)
PRISMATA_BASE_DIR=.
PRISMATA_VIDEOS_DIR=data/raw
PRISMATA_LABELS_DIR=data/labels
PRISMATA_MODELS_DIR=models
PRISMATA_DETECTIONS_DIR=data/detections
PRISMATA_CACHE_DIR=.cache/prismata

# S3 bucket configuration (used when PRISMATA_STORAGE_BACKEND=s3)
#
# Option A: Single bucket (recommended for bootstrapping, saves costs)
#   Keys are auto-prefixed: videos/, labels/, models/, detections/
PRISMATA_S3_BUCKET=prismata-data-dev
#
# Option B: Separate buckets per category (set these INSTEAD of PRISMATA_S3_BUCKET)
# PRISMATA_S3_BUCKET_VIDEOS=prismata-videos-dev
# PRISMATA_S3_BUCKET_LABELS=prismata-labels-dev
# PRISMATA_S3_BUCKET_MODELS=prismata-models-dev
# PRISMATA_S3_BUCKET_DETECTIONS=prismata-detections-dev

# Presigned URL expiry in seconds
PRISMATA_PRESIGNED_URL_EXPIRY=3600

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection
PRISMATA_DB_HOST=localhost
PRISMATA_DB_PORT=5432
PRISMATA_DB_NAME=prismata
PRISMATA_DB_USER=prismata
PRISMATA_DB_PASSWORD=your_password_here
PRISMATA_DB_SSL_MODE=prefer

# Connection pool settings
PRISMATA_DB_POOL_SIZE=5
PRISMATA_DB_MAX_OVERFLOW=10
PRISMATA_DB_POOL_TIMEOUT=30
PRISMATA_DB_POOL_RECYCLE=1800

# Or use a full DATABASE_URL instead
# DATABASE_URL=postgresql://prismata:password@localhost:5432/prismata

# SQLite fallback for local development (used if no PostgreSQL config)
PRISMATA_SQLITE_PATH=.cache/prismata/prismata.db

# =============================================================================
# AWS Configuration
# =============================================================================

# AWS Region
AWS_REGION=us-east-1

# AWS Credentials (optional - uses default credential chain if not set)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_SESSION_TOKEN=your_session_token

# =============================================================================
# GPU Instance Configuration
# =============================================================================

# EC2 GPU instance settings
PRISMATA_GPU_INSTANCE_TYPE=g4dn.xlarge
PRISMATA_GPU_AMI_ID=ami-xxxxxxxxx
PRISMATA_GPU_KEY_PAIR=prismata-gpu-key
PRISMATA_GPU_SECURITY_GROUP=sg-xxxxxxxxx
PRISMATA_GPU_SUBNET_ID=subnet-xxxxxxxxx
PRISMATA_GPU_IAM_PROFILE=prismata-gpu-profile

# Spot instance configuration
PRISMATA_USE_SPOT=false
PRISMATA_SPOT_MAX_PRICE=0.50

# Auto-termination settings
PRISMATA_AUTO_TERMINATE_MINUTES=30

# =============================================================================
# SageMaker Configuration (Optional)
# =============================================================================

PRISMATA_SAGEMAKER_ROLE_ARN=arn:aws:iam::123456789:role/prismata-sagemaker
PRISMATA_SAGEMAKER_TRAINING_IMAGE=123456789.dkr.ecr.us-east-1.amazonaws.com/prismata-gpu:latest
PRISMATA_SAGEMAKER_INFERENCE_IMAGE=123456789.dkr.ecr.us-east-1.amazonaws.com/prismata-gpu:latest

# =============================================================================
# Lambda Orchestrator
# =============================================================================

PRISMATA_LAMBDA_ORCHESTRATOR_ARN=arn:aws:lambda:us-east-1:123456789:function:prismata-gpu-orchestrator

# =============================================================================
# Redis/ElastiCache (Optional)
# =============================================================================

PRISMATA_REDIS_HOST=localhost
PRISMATA_REDIS_PORT=6379

# =============================================================================
# CloudWatch Logging
# =============================================================================

PRISMATA_CLOUDWATCH_LOG_GROUP=/prismata/jobs

# =============================================================================
# VPC Configuration
# =============================================================================

PRISMATA_VPC_ID=vpc-xxxxxxxxx
